<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Teste M√≥dulo 2 ‚Äì Diagn√≥stico Avan√ßado Nissan Micra</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #f4f7fb;
  color: #222;
  margin: 0;
  padding: 20px;
}
.container {
  max-width: 980px;
  margin: auto;
  background: #fff;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 8px 26px rgba(0,0,0,.08);
}
h1 {
  font-size: 1.5rem;
  color: #004a80;
  text-align: center;
}
.quiz-question {
  margin: 18px 0;
  padding: 16px;
  border-radius: 10px;
  border: 1px solid #dce3f0;
  background: #f9faff;
}
.quiz-question p {
  font-weight: 600;
  margin-bottom: 8px;
  color: #004a80;
}
label { display: block; margin: 6px 0; cursor: pointer; }
textarea {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 0.95rem;
}
button {
  padding: 10px 16px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
  font-weight: 700;
  margin-top: 12px;
}
.primary { background: #004a80; color: #fff; }
.secondary { background: #e0e6f0; color: #222; }
.small { font-size: 0.85rem; color: #666; }
#resultadoBox {
  margin-top: 20px;
  padding: 12px;
  background: #e6ffed;
  border: 1px solid #b2f5ea;
  border-radius: 8px;
  display: none;
}
.top-btn {
  display: inline-block;
  margin-bottom: 15px;
  text-decoration: none;
  background: #004a80;
  color: #fff;
  padding: 8px 14px;
  border-radius: 8px;
  font-weight: 600;
}
.top-btn:hover { background: #00345d; }
</style>
</head>

<body>
<div class="container">
  <a href="curso-Auto-Nmicra.html" class="top-btn">‚¨Ö Voltar ao Curso</a>
  <h1>Teste M√≥dulo 2 ‚Äì Diagn√≥stico Avan√ßado Nissan Micra</h1>

  <form id="quizForm">
    <div class="quiz-question">
      <p>Identifica√ß√£o do formando</p>
      <input id="alunoName" placeholder="Nome completo" required>
      <input id="alunoEmail" placeholder="Email" required>
      <p class="small">Preenche os dados para registo local.</p>
    </div>

    <div id="perguntasTeoricas"></div>

    <div class="quiz-question">
      <p><strong>üß© Estudo de Caso Pr√°tico</strong></p>
      <p>Um Nissan Micra 1.5 dCi entra em modo de seguran√ßa com o c√≥digo P2002 (efici√™ncia do DPF abaixo do limiar). O DPF n√£o regenera e a EGR mostra 80% de abertura fixa.</p>
      <label><input type="radio" name="caso" value="a"> Substituir DPF e EGR sem testar</label>
      <label><input type="radio" name="caso" value="b"> Executar regenera√ß√£o for√ßada e testar a posi√ß√£o da EGR via scanner</label>
      <label><input type="radio" name="caso" value="c"> Limpar injetores e verificar compress√£o</label>
      <label><input type="radio" name="caso" value="d"> Atualizar firmware da ECU</label>
      <p class="small">Descreve como resolverias este caso, incluindo ferramentas e justificativa t√©cnica:</p>
      <textarea name="resolucao" rows="6" required></textarea>
    </div>

    <button type="button" id="submitQuiz" class="primary">Submeter Teste</button>
    <button type="reset" id="resetQuiz" class="secondary">Limpar Respostas</button>
    <div id="resultadoBox"></div>
  </form>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const perguntas = [
    "1Ô∏è‚É£ Qual √© a fun√ß√£o principal do sensor CKP no Micra?",
    "2Ô∏è‚É£ O que indica sinal irregular do sensor CMP?",
    "3Ô∏è‚É£ Qual o valor normal do sensor ECT a 90¬∞C?",
    "4Ô∏è‚É£ Que equipamento mede forma de onda dos sensores?",
    "5Ô∏è‚É£ O que faz o sensor MAF no controlo da mistura?",
    "6Ô∏è‚É£ O que provoca falha P030X (misfire)?",
    "7Ô∏è‚É£ Como se identifica baixa compress√£o num cilindro?",
    "8Ô∏è‚É£ Sintoma t√≠pico de filtro de combust√≠vel entupido?",
    "9Ô∏è‚É£ O que caracteriza o sistema Common Rail do 1.5 dCi?",
    "üîü Que a√ß√£o ao encontrar DPF com 80% de satura√ß√£o?",
    "11Ô∏è‚É£ Qual fluido recomendado para CVT do Micra?",
    "12Ô∏è‚É£ O c√≥digo P0746 refere-se a qu√™?",
    "13Ô∏è‚É£ Sintoma de falha na embraiagem do Micra manual?",
    "14Ô∏è‚É£ Causa prov√°vel de ru√≠do met√°lico ao arranque?",
    "15Ô∏è‚É£ O que representa o c√≥digo C1604 no EPS?",
    "16Ô∏è‚É£ Ap√≥s trocar o sensor de torque, que passo seguir?",
    "17Ô∏è‚É£ Que teste confirma falha num amortecedor?",
    "18Ô∏è‚É£ Sintoma t√≠pico de rolamento de roda danificado?",
    "19Ô∏è‚É£ O que indica vibra√ß√£o ao travar?",
    "20Ô∏è‚É£ Por que calibrar sensor de √¢ngulo da dire√ß√£o ap√≥s reparo?"
  ];

  const alternativas = [
    ["a) Controlar press√£o do combust√≠vel", "b) Medir rota√ß√£o e posi√ß√£o do virabrequim", "c) Ajustar avan√ßo", "d) Corrigir mistura de ar"],
    ["a) Falha de sincronismo mec√¢nico", "b) Falha no sensor MAF", "c) Falha no catalisador", "d) Falha no alternador"],
    ["a) 200‚Äì300 Œ©", "b) 2‚Äì3 kŒ©", "c) 20‚Äì30 kŒ©", "d) 10‚Äì20 Œ©"],
    ["a) Mult√≠metro", "b) Oscilosc√≥pio", "c) Scanner", "d) Watt√≠metro"],
    ["a) Medir press√£o do rail", "b) Controlar temperatura do motor", "c) Medir massa de ar admitida", "d) Regular alternador"],
    ["a) Falha na ECU", "b) Falha em bobina, vela ou injetor", "c) Vazamento de √≥leo", "d) Sensor ECT em curto"],
    ["a) Teste de resist√™ncia el√©trica", "b) Teste de compress√£o", "c) Teste de combust√≠vel", "d) Leitura do scanner"],
    ["a) Fumo branco", "b) Motor falha em alta rota√ß√£o", "c) Perda de pot√™ncia", "d) Luz ABS acesa"],
    ["a) Sistema de inje√ß√£o mec√¢nica", "b) Inje√ß√£o el√©trica de alta press√£o", "c) Sistema de carbura√ß√£o", "d) Mistura por v√°cuo"],
    ["a) Substituir sensor MAF", "b) Regenerar DPF for√ßadamente", "c) Trocar bomba de combust√≠vel", "d) Reiniciar ECU"],
    ["a) ATF Dexron II", "b) Fluido NS-2 ou NS-3", "c) √ìleo 10W40", "d) DOT-4"],
    ["a) Sensor de temperatura CVT", "b) Press√£o de controlo hidr√°ulico CVT", "c) Sensor de √¢ngulo", "d) Bobina de igni√ß√£o"],
    ["a) Ru√≠do ao travar", "b) Patinagem e cheiro de queimado", "c) Luz EPS acesa", "d) Consumo alto"],
    ["a) Corrente de distribui√ß√£o folgada", "b) Sensor ECT em curto", "c) Falha no alternador", "d) EGR entupida"],
    ["a) Falha no motor el√©trico", "b) Falha no sensor de torque", "c) Falha na ECU", "d) Falha na bomba hidr√°ulica"],
    ["a) Nada", "b) Recalibrar via scanner", "c) Substituir m√≥dulo ABS", "d) Atualizar ECU"],
    ["a) Teste de compress√£o", "b) Teste de oscila√ß√£o", "c) Teste de amortecimento", "d) Teste de fuga"],
    ["a) Zumbido cont√≠nuo", "b) Estalo no pedal", "c) Perda de travagem", "d) Marcha irregular"],
    ["a) Pastilha gasta", "b) Disco empenado", "c) Suporte partido", "d) Pneu murcho"],
    ["a) Evitar recalibra√ß√£o", "b) Garantir alinhamento entre dire√ß√£o e rodas", "c) Reduzir consumo el√©trico", "d) Desligar sistema CAN"]
  ];

  const answers = {
    q1:'b', q2:'a', q3:'b', q4:'b', q5:'c',
    q6:'b', q7:'b', q8:'c', q9:'b', q10:'b',
    q11:'b', q12:'b', q13:'b', q14:'a', q15:'b',
    q16:'b', q17:'c', q18:'a', q19:'b', q20:'b'
  };

  const perguntasTeoricas = document.getElementById('perguntasTeoricas');
  perguntas.forEach((pergunta, i) => {
    const div = document.createElement('div');
    div.className = 'quiz-question';
    div.innerHTML = `<p>${pergunta}</p>` +
      alternativas[i].map((alt, j) => {
        const letra = ['a','b','c','d'][j];
        return `<label><input type="radio" name="q${i+1}" value="${letra}"> ${alt}</label>`;
      }).join('');
    perguntasTeoricas.appendChild(div);
  });

  const submitBtn = document.getElementById('submitQuiz');
  const resultBox = document.getElementById('resultadoBox');

  submitBtn.addEventListener('click', () => {
    const name = document.getElementById('alunoName').value.trim();
    const email = document.getElementById('alunoEmail').value.trim();
    if (!name || !email) return alert("Preenche nome e email antes de submeter.");

    let score = 0;
    for (let i = 1; i <= 20; i++) {
      const sel = document.querySelector(`input[name="q${i}"]:checked`);
      if (sel && sel.value === answers[`q${i}`]) score++;
    }
    const percent = Math.round((score / 20) * 100);

    resultBox.style.display = 'block';
    resultBox.innerHTML = `<p><strong>Obrigado, ${name}.</strong></p>
      <p>Pontua√ß√£o: <strong>${score}</strong> / 20 ‚Äî <strong>${percent}%</strong></p>
      <p class="small">As respostas foram registadas localmente (sem liga√ß√£o externa).</p>`;
    submitBtn.disabled = true;
  });
});
</script>
</body>
</html>
