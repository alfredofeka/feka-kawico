<!-- =======================
  Módulo Sexta-feira – Trabalho Final da Semana
==========================-->

<section class="module">
  <header class="module-header">
    <h1>Sexta-feira – Trabalho Final da Semana<br>Relatório de Síntese</h1>
    <p class="objetivos">
      <strong>Objetivos:</strong> Consolidar o conhecimento adquirido durante a semana:
      <ul>
        <li>Descrever a <strong>indústria de construção metálica e offshore</strong>.</li>
        <li>Referir as <strong>principais normas internacionais</strong> (ISO, DNV, ABS).</li>
        <li>Destacar <strong>termos técnicos essenciais</strong>.</li>
        <li>Listar os <strong>pontos críticos de segurança</strong> em projetos e operações offshore.</li>
      </ul>
    </p>
  </header>

  <!-- Instruções -->
  <div class="content-block">
    <h2>Instruções</h2>
    <p>Preencha os campos abaixo com os tópicos principais.  
       Ao finalizar, clique em <strong>"Gerar PDF"</strong> para obter automaticamente o relatório resumido da semana.</p>
  </div>

  <!-- Formulário Interativo -->
  <div class="content-block atividade">
    <h2>Atividade Interativa – Formulário de Relatório</h2>

    <form id="report-form">
      <label for="student-name"><strong>Nome do Aluno:</strong></label>
      <input type="text" id="student-name" placeholder="Digite o seu nome" required>

      <label for="industry"><strong>1. Breve descrição da indústria:</strong></label>
      <textarea id="industry" placeholder="Ex.: O setor offshore envolve projetos de exploração e produção em ambientes marítimos..." required></textarea>

      <label for="norms"><strong>2. Principais normas e padrões (ISO, DNV, ABS...):</strong></label>
      <textarea id="norms" placeholder="Ex.: A ISO 19902 trata de estruturas fixas offshore; DNV-ST-N001 cobre segurança marítima..." required></textarea>

      <label for="terms"><strong>3. Termos técnicos relevantes:</strong></label>
      <textarea id="terms" placeholder="Ex.: Fadiga, escoamento, soldabilidade, corrosão, compliance..." required></textarea>

      <label for="safety"><strong>4. Principais pontos de segurança:</strong></label>
      <textarea id="safety" placeholder="Ex.: Uso de EPIs, proteção contra corrosão, monitorização de cargas..." required></textarea>

      <button type="button" id="generate-pdf">Gerar PDF</button>
    </form>
  </div>

  <!-- Pré-visualização do PDF -->
  <div class="content-block">
    <h2>Pré-visualização do Relatório</h2>
    <iframe id="pdf-preview" style="width:100%; height:400px; border:1px solid #ccc;"></iframe>
  </div>

  <!-- Resumo -->
  <div class="resumo">
    <h2>Resumo</h2>
    <p>Este relatório sintetiza o conhecimento adquirido durante a semana,
       servindo como <strong>ferramenta de estudo e evidência de aprendizagem</strong>.
       O PDF gerado pode ser submetido ao instrutor e arquivado para acompanhamento do progresso do aluno.</p>
  </div>
</section>

<!-- ======== CSS do Padrão ======== -->
<style>
  body {font-family: 'Roboto', sans-serif; background:#f6f7f8; color:#222;}
  .module {max-width: 900px; margin: 0 auto; padding: 20px;}
  .module-header {border-left: 5px solid #007b8f; padding-left:15px; margin-bottom:20px;}
  h1,h2 {color:#007b8f;}
  .content-block {background:#fff; padding:20px; margin-bottom:20px; border-radius:8px;}
  .atividade {background:#eef7fa;}
  .resumo {background:#fff3cd; padding:20px; border-radius:8px;}

  /* Formulário */
  form label {display:block; margin-top:10px; font-weight:bold;}
  input[type="text"], textarea {
    width:100%; padding:10px; margin-top:5px; border:1px solid #007b8f; border-radius:5px;
  }
  textarea {min-height:80px; resize:vertical;}
  button {margin-top:15px; padding:10px 20px; border:none; border-radius:5px; background:#007b8f; color:#fff; cursor:pointer;}
  button:hover {background:#005f6b;}
</style>

<!-- ======== JS – Geração do PDF ======== -->
<!-- É necessário importar a biblioteca jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
const { jsPDF } = window.jspdf;

document.getElementById('generate-pdf').addEventListener('click', () => {
  // Obter dados do formulário
  const studentName = document.getElementById('student-name').value.trim();
  const industry = document.getElementById('industry').value.trim();
  const norms = document.getElementById('norms').value.trim();
  const terms = document.getElementById('terms').value.trim();
  const safety = document.getElementById('safety').value.trim();

  if (!studentName || !industry || !norms || !terms || !safety) {
    alert("Por favor, preencha todos os campos do relatório.");
    return;
  }

  // Criar PDF
  const doc = new jsPDF();
  doc.setFont("Helvetica", "normal");
  doc.setFontSize(14);
  doc.text("Relatório – Semana 1", 20, 20);
  doc.setFontSize(12);
  doc.text(`Aluno: ${studentName}`, 20, 30);
  doc.text("====================================", 20, 36);

  let y = 50;
  const addSection = (title, content) => {
    doc.setFont("Helvetica", "bold");
    doc.text(title, 20, y);
    y += 8;
    doc.setFont("Helvetica", "normal");
    const splitText = doc.splitTextToSize(content, 170);
    doc.text(splitText, 20, y);
    y += splitText.length * 8 + 5;
  };

  addSection("1. Indústria de Construção Metálica e Offshore", industry);
  addSection("2. Principais Normas Internacionais", norms);
  addSection("3. Termos Técnicos Relevantes", terms);
  addSection("4. Pontos de Segurança", safety);

  // Gerar Blob e visualizar no iframe
  const pdfBlob = doc.output("blob");
  const pdfUrl = URL.createObjectURL(pdfBlob);
  document.getElementById('pdf-preview').src = pdfUrl;
});
</script>
