<!doctype html>
<html lang="pt-PT">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Domingo ‚Äì Revis√£o Leve (Multim√©dia Offline)</title>
<style>
  :root{
    --accent:#007b8f;
    --bg:#f6f7f8;
    --card:#ffffff;
    --muted:#555;
  }
  body{
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg); color:#222; margin:0; padding:20px;
  }
  .module{max-width:1100px; margin:0 auto;}
  .module-header{border-left:5px solid var(--accent); padding-left:15px; margin-bottom:18px;}
  h1,h2,h3{color:var(--accent); margin:0 0 8px 0;}
  p{margin:0 0 10px 0;}
  .content-block{background:var(--card); padding:18px; border-radius:10px; margin-bottom:18px; box-shadow:0 6px 18px rgba(0,0,0,0.04);}
  .resumo-grid{display:grid; grid-template-columns:repeat(auto-fit, minmax(300px,1fr)); gap:18px;}
  .resumo-item{padding:12px; border-radius:8px; background:#fff; border:1px solid #e6eef0;}
  .image-row{display:flex; gap:12px; flex-wrap:wrap;}
  canvas{width:100%; height:auto; display:block; border-radius:6px; background:linear-gradient(180deg, #fff 0%, #fbfdff 100%);}
  .controls{display:flex; gap:8px; flex-wrap:wrap; margin-top:8px;}
  button{background:var(--accent); color:#fff; border:none; padding:8px 12px; border-radius:6px; cursor:pointer;}
  button.secondary{background:#e6eef0; color:#007b8f;}
  .timeline{list-style:none; padding:0; margin:0;}
  .timeline li{padding:8px 0; border-left:3px solid var(--accent); margin-left:12px; padding-left:14px;}
  .small{font-size:0.9rem; color:var(--muted);}
  .gallery{display:grid; grid-template-columns:1fr 1fr; gap:12px;}
  .download-note{font-size:0.85rem; color:var(--muted); margin-top:8px;}
  @media (max-width:640px){
    .gallery{grid-template-columns:1fr;}
  }
</style>
</head>
<body>
  <main class="module">
    <header class="module-header">
      <h1>Domingo ‚Äì Descanso e Revis√£o Leve</h1>
      <p class="small">Resumo visual e multim√©dia offline ‚Äî ilustra√ß√µes geradas por Canvas com aspecto de desenho real.</p>
    </header>

    <section class="content-block">
      <h2>üí° Recomenda√ß√µes do Dia</h2>
      <ul class="small">
        <li>Revisar notas dos dias anteriores.</li>
        <li>Ver v√≠deos curtos de refor√ßo (local ou embutidos).</li>
        <li>Explorar as ilustra√ß√µes abaixo ‚Äî cada desenho pode ser descarregado.</li>
        <li>Relaxar: aprendizagem cont√≠nua tamb√©m precisa de descanso.</li>
      </ul>
    </section>

    <section class="content-block">
      <h2>üìö Resumo Interativo da Semana (visual)</h2>
      <div class="resumo-grid">

        <!-- V√≠deos / Espa√ßo para v√≠deos locais -->
        <div class="resumo-item">
          <h3>üé• V√≠deos (local / embutido)</h3>
          <p class="small">Se tiveres ficheiros MP4 locais, arrasta-os para aqui. Ou mant√©m os links embutidos no LMS.</p>
          <div id="video-drop" style="border:1px dashed #e0f3f5; padding:10px; border-radius:6px; min-height:120px;">
            <p class="small">Arraste um ficheiro .mp4 para esta √°rea para pr√©-visualizar (funciona offline).</p>
            <video id="local-video" controls style="width:100%; display:none; margin-top:8px;"></video>
          </div>
        </div>

        <!-- Galeria com canvases gerados offline -->
        <div class="resumo-item">
          <h3>üñºÔ∏è Galeria de Esbo√ßos (Offline)</h3>
          <p class="small">Os esbo√ßos abaixo s√£o gerados no browser: infraestrutura, engenheiro (estilo anime) e animal mascote. Podes descarregar cada um.</p>

          <div class="gallery">
            <div>
              <h4 class="small">Infraestrutura ‚Äì Esbo√ßo t√©cnico</h4>
              <canvas id="canvas-infra" width="800" height="500" aria-label="Esbo√ßo de infraestrutura"></canvas>
              <div class="controls">
                <button onclick="redrawInfra()">Regenerar</button>
                <button class="secondary" onclick="downloadCanvas('canvas-infra','infraestrutura.png')">Descarregar PNG</button>
              </div>
            </div>

            <div>
              <h4 class="small">Engenheiro ‚Äì Estilo anime (esbo√ßado)</h4>
              <canvas id="canvas-engineer" width="800" height="500" aria-label="Desenho estilo anime de um engenheiro"></canvas>
              <div class="controls">
                <button onclick="redrawEngineer()">Regenerar</button>
                <button class="secondary" onclick="downloadCanvas('canvas-engineer','engenheiro.png')">Descarregar PNG</button>
              </div>
            </div>

            <div>
              <h4 class="small">Animal Mascote ‚Äì √çcone simp√°tico</h4>
              <canvas id="canvas-animal" width="800" height="500" aria-label="Desenho de animal mascot"></canvas>
              <div class="controls">
                <button onclick="redrawAnimal()">Regenerar</button>
                <button class="secondary" onclick="downloadCanvas('canvas-animal','mascote.png')">Descarregar PNG</button>
              </div>
            </div>

            <div>
              <h4 class="small">Overlay t√©cnico (SVG)</h4>
              <svg id="svg-overlay" width="100%" height="220" viewBox="0 0 800 220" style="background:#fff; border-radius:6px;">
                <!-- simples diagrama t√©cnico; tamb√©m offline -->
                <defs>
                  <linearGradient id="g1" x1="0" x2="1">
                    <stop offset="0" stop-color="#e6f7fb"/>
                    <stop offset="1" stop-color="#ffffff"/>
                  </linearGradient>
                </defs>
                <rect x="0" y="0" width="800" height="220" fill="url(#g1)"/>
                <g stroke="#007b8f" stroke-width="2" fill="none" transform="translate(20,10)">
                  <rect x="0" y="0" width="280" height="90" rx="8" />
                  <rect x="300" y="0" width="240" height="90" rx="8" />
                  <rect x="300" y="110" width="360" height="90" rx="8" />
                  <path d="M280 45 L300 45" stroke-linecap="round"/>
                  <path d="M420 90 L420 110" stroke-linecap="round"/>
                </g>
                <text x="12" y="22" fill="#007b8f" font-size="14">Diagrama s√≠ntese ‚Äî semana 1</text>
              </svg>
              <p class="download-note small">O SVG acima √© edit√°vel inline ‚Äî podes adaptar textos e formas.</p>
            </div>
          </div>
        </div>

        <!-- Linha do tempo compacta -->
        <div class="resumo-item">
          <h3>üìù Linha do Tempo ‚Äì Semana 1</h3>
          <ul class="timeline">
            <li><strong>Segunda-feira:</strong> Conceitos gerais sobre a ind√∫stria e players.</li>
            <li><strong>Ter√ßa-feira:</strong> Normas internacionais e compliance.</li>
            <li><strong>Quarta-feira:</strong> Materiais e propriedades.</li>
            <li><strong>Quinta-feira:</strong> Debate e simula√ß√£o de obra.</li>
            <li><strong>Sexta-feira:</strong> Relat√≥rio final (PDF).</li>
            <li><strong>S√°bado:</strong> Teste da semana.</li>
            <li><strong>Domingo:</strong> Revis√£o leve e multim√©dia.</li>
          </ul>
        </div>
      </div>
    </section>

    <section class="content-block">
      <h2>üåü Dicas r√°pidas</h2>
      <p class="small">Se queres um aspecto mais ‚Äúrealista‚Äù dos esbo√ßos, pressiona Regenerar v√°rias vezes para obter varia√ß√µes (o algoritmo aplica ru√≠do controlado e hachuras). Cada desenho √© gerado com tra√ßo irregular para imitar caneta/brush.</p>
    </section>

  </main>

<script>
/* -------------------------
   Utilit√°rios comuns
   ------------------------- */
function rand(range){ return Math.random()*range; }
function randBetween(a,b){ return a + Math.random()*(b-a); }
function jitter(x, amp){ return x + (Math.random()*2-1)*amp; }

/* Download canvas as PNG */
function downloadCanvas(canvasId, filename){
  const c = document.getElementById(canvasId);
  c.toBlob(function(blob){
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = filename;
    document.body.appendChild(a);
    a.click();
    a.remove();
  }, 'image/png');
}

/* -------------------------
   Infraestrutura sketch
   ------------------------- */
function drawSketchInfrastructure(ctx, w, h){
  ctx.clearRect(0,0,w,h);
  ctx.save();
  // sky
  const g = ctx.createLinearGradient(0,0,0,h);
  g.addColorStop(0,'#f5fbff'); g.addColorStop(1,'#ffffff');
  ctx.fillStyle = g; ctx.fillRect(0,0,w,h);

  // ground
  ctx.fillStyle = '#f0f6f7'; ctx.fillRect(0,h*0.72,w,h*0.28);

  // draw jacket-like tower with sketchy strokes
  function sketchRect(x,y,ww,hh,lines=6){
    ctx.lineWidth = 2;
    for(let i=0;i<lines;i++){
      ctx.beginPath();
      ctx.strokeStyle = 'rgba(0,90,112,0.9)';
      const ox = (Math.random()-0.5)*2, oy=(Math.random()-0.5)*2;
      ctx.moveTo(x+ox, y+oy);
      ctx.lineTo(x+ww+ox, y+oy);
      ctx.lineTo(x+ww+ox, y+hh+oy);
      ctx.lineTo(x+ox, y+hh+oy);
      ctx.closePath();
      ctx.stroke();
    }
  }

  // legs
  const cx = w*0.18, cx2 = w*0.55;
  sketchRect(cx, h*0.36, 120, 220, 4);
  sketchRect(cx2, h*0.28, 220, 260, 4);

  // cross bracing (sketch)
  ctx.strokeStyle = 'rgba(0,90,112,0.6)';
  ctx.lineWidth = 1.6;
  for(let i=0;i<8;i++){
    ctx.beginPath();
    const x1 = cx + (i/8)*120, y1 = h*0.36 + (i%2?0:20);
    const x2 = cx + 120 - (i/8)*120, y2 = h*0.36 + 220 - (i%2?0:20);
    ctx.moveTo(jitter(x1,2), jitter(y1,2));
    ctx.lineTo(jitter(x2,2), jitter(y2,2));
    ctx.stroke();
  }
  for(let i=0;i<12;i++){
    ctx.beginPath();
    const x1 = cx2 + (i/12)*220, y1 = h*0.28 + (i%2?0:10);
    const x2 = cx2 + 220 - (i/12)*220, y2 = h*0.28 + 260 - (i%2?0:10);
    ctx.moveTo(jitter(x1,2), jitter(y1,2));
    ctx.lineTo(jitter(x2,2), jitter(y2,2));
    ctx.stroke();
  }

  // deck
  ctx.fillStyle = '#dfeff1';
  ctx.fillRect(w*0.48, h*0.18, 240, 32);
  for(let i=0;i<3;i++){
    ctx.strokeStyle = 'rgba(0,90,112,0.6)';
    ctx.beginPath();
    ctx.moveTo(w*0.48+6 + i*70, h*0.18+2);
    ctx.lineTo(w*0.48+6 + i*70, h*0.18+28);
    ctx.stroke();
  }

  // supply vessel silhouette
  ctx.fillStyle = 'rgba(0,0,0,0.08)';
  ctx.beginPath();
  ctx.moveTo(w*0.05, h*0.85);
  ctx.lineTo(w*0.2, h*0.83);
  ctx.lineTo(w*0.28, h*0.88);
  ctx.lineTo(w*0.05, h*0.9);
  ctx.closePath();
  ctx.fill();

  // annotations ‚Äî hand-drawn arrows
  ctx.strokeStyle = '#007b8f';
  ctx.lineWidth = 1.4;
  ctx.beginPath();
  ctx.moveTo(w*0.4, h*0.45);
  ctx.lineTo(w*0.52, h*0.24);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(w*0.42, h*0.44);
  ctx.lineTo(w*0.49, h*0.27);
  ctx.stroke();

  // hand-sketched text
  ctx.fillStyle = '#005f6b';
  ctx.font = 'bold 14px serif';
  ctx.fillText('Jacket ‚Ä¢ Topsides', w*0.53, h*0.2);
  ctx.restore();
}

/* -------------------------
   Anime-style engineer sketch
   ------------------------- */
function drawSketchEngineer(ctx, w, h){
  ctx.clearRect(0,0,w,h);
  ctx.save();

  // soft background
  ctx.fillStyle = '#fffefc'; ctx.fillRect(0,0,w,h);

  // face (cartoon/anime simplified)
  const cx = w*0.45, cy = h*0.42;
  function strokeCircle(x,y,r, color){
    for(let i=0;i<3;i++){
      ctx.beginPath();
      ctx.strokeStyle = color;
      ctx.lineWidth = 1.2 + i*0.6;
      ctx.arc(jitter(x,1.5), jitter(y,1.5), r + i*0.8, 0, Math.PI*2);
      ctx.stroke();
    }
  }

  // neck / body
  ctx.fillStyle = '#e9f5f6';
  ctx.fillRect(cx-60, cy+40, 120, 120);
  // helmet
  ctx.fillStyle = '#ffefc7';
  ctx.beginPath();
  ctx.ellipse(cx, cy-40, 70, 40, 0, 0, Math.PI*2);
  ctx.fill();
  strokeCircle(cx, cy-40, 70, 'rgba(0,0,0,0.12)');

  // face
  ctx.fillStyle = '#fff7f0';
  ctx.beginPath();
  ctx.ellipse(cx, cy, 60, 72, 0, 0, Math.PI*2);
  ctx.fill();
  strokeCircle(cx, cy, 60, 'rgba(30,30,30,0.6)');

  // eyes
  ctx.fillStyle = '#002f38';
  ctx.beginPath(); ctx.ellipse(cx-20, cy-10, 8, 12, 0, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.ellipse(cx+20, cy-10, 8, 12, 0, 0, Math.PI*2); ctx.fill();

  // mouth (simple)
  ctx.strokeStyle = '#00474e';
  ctx.lineWidth = 1.2;
  ctx.beginPath();
  ctx.moveTo(cx-12, cy+18); ctx.quadraticCurveTo(cx, cy+26, cx+12, cy+18);
  ctx.stroke();

  // glasses / visor
  ctx.strokeStyle = 'rgba(0,90,112,0.9)';
  ctx.lineWidth = 2;
  ctx.strokeRect(cx-36, cy-20, 72, 22);

  // clipboard with sketch
  ctx.fillStyle = '#fff';
  ctx.strokeStyle = '#d1e9eb';
  ctx.fillRect(w*0.65, h*0.35, 120, 160);
  ctx.strokeRect(w*0.65, h*0.35, 120, 160);
  ctx.fillStyle = '#007b8f';
  ctx.font = '12px serif'; ctx.fillText('Checklist', w*0.67, h*0.39);

  // small sketch lines on clipboard (hand-drawn)
  ctx.strokeStyle = '#007b8f';
  for(let i=0;i<6;i++){
    ctx.beginPath();
    ctx.moveTo(w*0.67, h*0.45 + i*16);
    ctx.lineTo(w*0.77, h*0.45 + i*16);
    ctx.stroke();
  }

  // badge & logo (simple)
  ctx.fillStyle = '#ffd7a8';
  ctx.beginPath(); ctx.arc(cx-45, cy+60, 18, 0, Math.PI*2); ctx.fill();
  ctx.strokeStyle = '#e6ab64'; ctx.stroke();

  // small hachures and hand-drawn lines to give sketchiness
  ctx.strokeStyle = 'rgba(0,0,0,0.08)';
  for(let i=0;i<40;i++){
    ctx.beginPath();
    ctx.moveTo(randBetween(0,w), randBetween(h*0.6,h));
    ctx.lineTo(randBetween(0,w), randBetween(h*0.6,h));
    ctx.stroke();
  }

  // label
  ctx.fillStyle = '#005f6b';
  ctx.font = 'bold 14px serif';
  ctx.fillText('Eng. de Obras ‚Ä¢ Inspe√ß√£o', w*0.62, h*0.78);

  ctx.restore();
}

/* -------------------------
   Animal mascot sketch
   ------------------------- */
function drawSketchAnimal(ctx, w, h){
  ctx.clearRect(0,0,w,h);
  ctx.save();
  ctx.fillStyle = '#fffdfb'; ctx.fillRect(0,0,w,h);

  // body
  const cx = w*0.45, cy = h*0.54;
  ctx.fillStyle = '#ffefd6';
  ctx.beginPath();
  ctx.ellipse(cx, cy, 120, 90, 0, 0, Math.PI*2); ctx.fill();

  // head
  ctx.fillStyle = '#fff7ee';
  ctx.beginPath();
  ctx.arc(cx-40, cy-40, 48, 0, Math.PI*2); ctx.fill();
  ctx.strokeStyle = '#d9bfa8'; ctx.stroke();

  // eyes
  ctx.fillStyle = '#00333a';
  ctx.beginPath(); ctx.arc(cx-52, cy-46, 6, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.arc(cx-28, cy-46, 6, 0, Math.PI*2); ctx.fill();

  // helmet little
  ctx.fillStyle = '#bfeaf0';
  ctx.fillRect(cx-64, cy-70, 60, 18);
  ctx.strokeStyle = '#9fd7dc'; ctx.strokeRect(cx-64, cy-70, 60, 18);

  // paws (stylized)
  ctx.fillStyle = '#ffd8b2';
  ctx.beginPath(); ctx.ellipse(cx+40, cy+60, 28, 18, 0, 0, Math.PI*2); ctx.fill();
  ctx.beginPath(); ctx.ellipse(cx-80, cy+60, 28, 18, 0, 0, Math.PI*2); ctx.fill();

  // tail (sketchy)
  ctx.strokeStyle = '#f0b07a';
  ctx.lineWidth = 6;
  ctx.beginPath();
  ctx.moveTo(cx+120, cy+10);
  ctx.quadraticCurveTo(cx+180, cy-20, cx+170, cy-60);
  ctx.stroke();

  // cute smile
  ctx.strokeStyle = '#006068';
  ctx.lineWidth = 1.6;
  ctx.beginPath();
  ctx.moveTo(cx-46, cy-28); ctx.quadraticCurveTo(cx-40, cy-20, cx-34, cy-28);
  ctx.stroke();

  // small hard-hatch shading
  ctx.strokeStyle = 'rgba(0,0,0,0.06)';
  for(let i=0;i<20;i++){
    ctx.beginPath();
    ctx.moveTo(randBetween(cx-10,cx+10), randBetween(cy+10, cy+60));
    ctx.lineTo(randBetween(cx-20,cx+30), randBetween(cy+20, cy+80));
    ctx.stroke();
  }

  // label
  ctx.fillStyle = '#005f6b';
  ctx.font = 'bold 14px serif';
  ctx.fillText('Mascote ‚Ä¢ Seguran√ßa', w*0.62, h*0.86);

  ctx.restore();
}

/* -------------------------
   Init and redraw wrappers
   ------------------------- */
function initCanvases(){
  const cInfra = document.getElementById('canvas-infra');
  const cEng = document.getElementById('canvas-engineer');
  const cAni = document.getElementById('canvas-animal');

  // set internal canvas sizes for crispness
  [cInfra, cEng, cAni].forEach(c=>{
    const ratio = window.devicePixelRatio || 1;
    const wCSS = c.clientWidth;
    const hCSS = c.clientHeight;
    c.width = Math.floor(wCSS * ratio);
    c.height = Math.floor(hCSS * ratio);
    c.style.width = wCSS + 'px';
    c.style.height = hCSS + 'px';
  });

  drawInfra();
  drawEngineer();
  drawAnimal();
}

function drawInfra(){
  const c = document.getElementById('canvas-infra');
  const ctx = c.getContext('2d');
  drawSketchInfrastructure(ctx, c.width, c.height);
}
function drawEngineer(){
  const c = document.getElementById('canvas-engineer');
  const ctx = c.getContext('2d');
  drawSketchEngineer(ctx, c.width, c.height);
}
function drawAnimal(){
  const c = document.getElementById('canvas-animal');
  const ctx = c.getContext('2d');
  drawSketchAnimal(ctx, c.width, c.height);
}

// expose simple API for buttons
function redrawInfra(){ drawInfra(); }
function redrawEngineer(){ drawEngineer(); }
function redrawAnimal(){ drawAnimal(); }

/* -------------------------
   Drag & drop video local
   ------------------------- */
const drop = document.getElementById('video-drop');
const localVideo = document.getElementById('local-video');

drop.addEventListener('dragover', e => { e.preventDefault(); drop.style.background='#f0fbfd'; });
drop.addEventListener('dragleave', e => { drop.style.background=''; });
drop.addEventListener('drop', e => {
  e.preventDefault(); drop.style.background='';
  const f = e.dataTransfer.files[0];
  if(!f) return;
  if(f.type.indexOf('video')!==0){ alert('Por favor, arraste um ficheiro de v√≠deo (mp4).'); return; }
  const url = URL.createObjectURL(f);
  localVideo.src = url; localVideo.style.display='block'; localVideo.play();
});

/* -------------------------
   On load
   ------------------------- */
window.addEventListener('load', () => {
  // create canvases and draw
  // slight timeout to allow layout to stabilise
  setTimeout(initCanvases, 120);
  // redraw on resize for responsiveness
  window.addEventListener('resize', () => { setTimeout(initCanvases, 120); });
});
</script>
</body>
</html>
